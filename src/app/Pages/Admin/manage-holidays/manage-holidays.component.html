<div class="p-fluid h-screen p-4 bg-gray-100">
  <p-confirmDialog></p-confirmDialog>

  <!-- Show List of Holidays Button aligned to the right -->
  <div class="flex justify-content-end mb-4">
    <p-button label="{{ showHolidayList ? 'Add Holiday' : 'List of Holidays' }}"
      class="p-button-secondary p-button-sm" severity="secondary" (click)="toggleHolidayList()">
    </p-button>
  </div>

  <!-- Add Holiday Form (Visible when showHolidayList is false) -->
  <div class="flex justify-content-center mb-4" *ngIf="!showHolidayList">
    <div class="p-fluid w-full md:w-8 lg:w-6">
      <div class="border-1 border-round p-3 shadow-2 bg-white">
        <!-- Title -->
        <h2 class="text-2xl font-bold text-center mb-3">{{ selectedHolidayId ? 'Edit Holiday' : 'Add Holiday' }}</h2>

        <!-- Reactive Form -->
        <form [formGroup]="holidayForm" (ngSubmit)="onSubmit()">
          <div class="grid formgrid p-fluid">
            <!-- Holiday Name Field -->
            <div class="col-12 lg:col-6">
              <div class="field">
                <label for="holidayName" class="font-semibold">Holiday Name</label>
                <input id="holidayName" type="text" class="p-inputtext p-component w-full border-1 border-round"
                  placeholder="Enter Holiday Name" formControlName="holidayName" />
              </div>
            </div>

            <!-- Holiday Date Field -->
            <div class="col-12 lg:col-6">
              <div class="field">
                <label for="holidayDate" class="font-semibold">Holiday Date</label>
                <input id="holidayDate" type="date" class="p-inputtext p-component w-full border-1 border-round"
                  formControlName="holidayDate" />
              </div>
            </div>

            <!-- Centered Add/Edit Holiday Button -->
            <div class="col-12 flex justify-content-center mt-3">
              <button type="submit" class="p-button p-component p-button-primary" [disabled]="holidayForm.invalid">
                <span class="p-button-label">{{ selectedHolidayId ? 'Update Holiday' : 'Add Holiday' }}</span>
              </button>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Holiday List Table (Visible when showHolidayList is true) -->
  <div *ngIf="showHolidayList" class="p-fluid w-full md:w-8 lg:w-6 mx-auto mt-4" style="padding-bottom: 60px;">
    <h3 class="text-xl font-bold text-center mb-3">Holiday List</h3>

    <!-- Ensure that table container does not overlap with footer -->
    <div style="max-height: calc(100vh - 150px); overflow-y: auto;">
      <p-table [value]="holidays" [paginator]="true" [rows]="5" responsiveLayout="scroll">
        <ng-template pTemplate="header">
          <tr>
            <th>Holiday Name</th>
            <th>Holiday Date</th>
            <th>Edit</th>
            <th>Delete</th>
          </tr>
        </ng-template>

        <ng-template pTemplate="body" let-holiday>
          <tr>
            <td>{{ holiday.holidayName }}</td>
            <td>{{ holiday.holidayDate }}</td>
            <td>
              <button type="button" class="p-button p-component p-button-success" (click)="editHoliday(holiday)">
                <span class="p-button-label">Edit</span>
              </button>
            </td>
            <td>
              <p-button label="Delete" severity="danger" [outlined]="true" (onClick)="deleteHoliday(holiday.id, $event)"></p-button>
            </td>
          </tr>
        </ng-template>

        <ng-template pTemplate="emptymessage">
          <tr>
            <td colspan="4">No holidays found.</td>
          </tr>
        </ng-template>
      </p-table>
    </div>
  </div>
  <!-- Toast Notification -->
  <p-toast></p-toast>
  

</div>